<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tertulia Oro &amp; Cielo | Everton de Viña del Mar</title>
  <meta name="description" content="Tertulia Oro & Cielo: noticias, análisis y conversación del Everton de Viña del Mar. Resultados y próximos partidos + Instagram." />

  <style>
    :root{
      /* Everton vibe */
      --blue-950:#04102c;
      --blue-900:#061a44;
      --blue-800:#0a2a74;
      --blue-700:#0c3aa6;

      --yellow:#ffd200;
      --yellow-2:#ffcc00;

      --text:#f4f7ff;
      --muted:rgba(244,247,255,.72);
      --line:rgba(255,255,255,.12);

      --card:rgba(255,255,255,.06);
      --card2:rgba(0,0,0,.16);

      --radius:18px;
      --shadow: 0 18px 60px rgba(0,0,0,.35);

      --max: 1120px;
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1000px 520px at 15% -10%, rgba(255,210,0,.25), transparent 60%),
        radial-gradient(900px 480px at 90% 0%, rgba(18,105,255,.22), transparent 58%),
        linear-gradient(180deg, var(--blue-950), var(--blue-900));
      line-height:1.55;
    }
    a{ color:inherit; text-decoration:none; }
    .wrap{ max-width:var(--max); margin:0 auto; padding:0 18px; }

    /* Top bar */
    .top{
      position:sticky; top:0; z-index:20;
      background: rgba(4,16,44,.72);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .top-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 240px;
    }
    .mark{
      width:12px; height:12px; border-radius:999px;
      background: linear-gradient(90deg, var(--yellow), #ffffff);
      box-shadow: 0 0 0 7px rgba(255,210,0,.14);
    }
    .brand strong{ font-size:14px; letter-spacing:.2px; }
    .brand span{ display:block; font-size:12px; color:var(--muted); margin-top:2px; }

    .nav{
      display:flex; gap:16px; align-items:center;
      font-size:13px; color:var(--muted);
    }
    .nav a{ padding:8px 10px; border-radius:999px; border:1px solid transparent; }
    .nav a:hover{ color:var(--text); border-color: rgba(255,255,255,.14); background: rgba(255,255,255,.04); }

    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      font-weight:900;
      font-size:13px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      transition:.15s ease;
      white-space:nowrap;
      cursor:pointer;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }
    .btn-yellow{
      background: linear-gradient(180deg, var(--yellow), var(--yellow-2));
      color:#0a0f1f;
      border-color: rgba(255,210,0,.55);
      box-shadow: 0 12px 30px rgba(255,210,0,.12);
    }
    .btn-yellow:hover{ filter: brightness(.98); background: linear-gradient(180deg, #ffe046, var(--yellow-2)); }

    /* Sections */
    section{ padding:70px 0; }
    .hairline{ border-top:1px solid var(--line); }

    h1{
      margin: 12px 0 12px;
      font-size: clamp(38px, 4.8vw, 64px);
      line-height:1.02;
      letter-spacing:-1px;
    }
    h2{
      margin:0 0 12px;
      font-size: 22px;
      letter-spacing:-.2px;
    }
    p{ margin:0 0 14px; color: var(--muted); font-size:16px; }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      padding:7px 12px;
      border:1px solid rgba(255,255,255,.16);
      border-radius:999px;
      background: rgba(0,0,0,.12);
      color: rgba(255,255,255,.92);
      font-size:13px;
    }
    .kdot{
      width:8px; height:8px; border-radius:999px;
      background: var(--yellow);
      box-shadow: 0 0 0 5px rgba(255,210,0,.14);
    }

    /* Hero layout */
    .hero{ padding:84px 0 72px; position:relative; overflow:hidden; }
    .hero:after{
      content:"";
      position:absolute; inset:-140px -180px auto auto;
      width:520px; height:520px; border-radius:999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,210,0,.32), rgba(255,210,0,0));
      pointer-events:none;
      transform: rotate(10deg);
      filter: blur(.2px);
    }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:22px;
      align-items:start;
      position:relative;
      z-index:1;
    }
    .hero p{ max-width: 64ch; }
    .hero-actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:18px;
    }

    /* Cards */
    .card{
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.16));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .card-pad{ padding:16px; }

    /* Match widget */
    .widget-head{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      margin-bottom:12px;
    }
    .widget-head h3{
      margin:0;
      font-size:14px;
      letter-spacing:.2px;
      color: rgba(255,255,255,.92);
    }
    .tiny{
      font-size:12px;
      color: rgba(255,255,255,.74);
    }
    .match-row{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      gap:10px;
      align-items:center;
      padding:12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      margin-bottom:10px;
    }
    .team{
      display:flex; align-items:center; gap:10px;
      min-width:0;
    }
    .badge{
      width:30px; height:30px; border-radius:999px;
      display:flex; align-items:center; justify-content:center;
      font-weight:1000;
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.14);
      flex:0 0 auto;
    }
    .team b{
      display:block;
      font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .team span{
      display:block;
      font-size:12px;
      color: rgba(255,255,255,.72);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .score{
      font-weight:1000;
      font-size:16px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:#fff;
      min-width: 64px;
      text-align:center;
    }
    .widget-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    .list{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      border-radius:16px;
      padding:12px;
    }
    .list h4{ margin:0 0 10px; font-size:13px; color: rgba(255,255,255,.92); }
    .rowm{
      display:flex; justify-content:space-between; align-items:center;
      gap:10px;
      padding:9px 0;
      border-top: 1px solid rgba(255,255,255,.10);
    }
    .rowm:first-of-type{ border-top:0; }
    .rowm .left{ min-width:0; }
    .rowm .left b{
      display:block; font-size:12.5px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      color: rgba(255,255,255,.92);
    }
    .rowm .left span{
      display:block; font-size:12px; color: rgba(255,255,255,.68);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .pill{
      font-weight:1000;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.14);
      white-space:nowrap;
      color: rgba(255,255,255,.92);
    }

    /* Content blocks (Noticias, etc.) */
    .block{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,.20);
    }
    .block-head{
      padding:18px 18px 0;
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
    }
    .block-body{ padding:18px; }

    /* Instagram placeholder */
    .ig-box{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      overflow:hidden;
      background: rgba(0,0,0,.10);
    }
    .ig-placeholder{
      padding:16px;
      background: linear-gradient(180deg, rgba(255,210,0,.10), rgba(12,58,166,.12));
    }
    .ig-placeholder p{ margin:0; color: rgba(255,255,255,.82); font-size:14px; }
    .ig-placeholder code{
      display:block;
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.86);
      font-size:12px;
      word-break: break-all;
    }

    /* Team section */
    .team-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:14px;
      margin-top:12px;
    }
    .member{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      border-radius: 16px;
      padding:14px;
    }
    .member-top{
      display:flex; align-items:center; gap:12px;
      margin-bottom:10px;
    }
    .avatar{
      width:52px; height:52px; border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      overflow:hidden;
      flex:0 0 auto;
    }
    .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
    .member b{ display:block; font-size:14px; color: rgba(255,255,255,.94); }
    .member span{ display:block; font-size:12px; color: rgba(255,255,255,.70); margin-top:2px; }

    /* Contact */
    form{ display:grid; gap:10px; margin-top:10px; }
    .grid2{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    label{ font-size:12px; color: rgba(255,255,255,.72); }
    input, textarea{
      width:100%;
      padding:12px;
      border:1px solid rgba(255,255,255,.14);
      border-radius:12px;
      font-size:14px;
      outline:none;
      background: rgba(0,0,0,.14);
      color: rgba(255,255,255,.92);
    }
    textarea{ min-height:120px; resize:vertical; }

    footer{
      padding:28px 0 44px;
      border-top:1px solid var(--line);
      color: rgba(255,255,255,.72);
      font-size:13px;
      background: rgba(0,0,0,.10);
    }
    .foot{
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      align-items:center;
    }

    /* Responsive */
    @media (max-width: 1020px){
      .nav{ display:none; }
      .hero-grid{ grid-template-columns:1fr; }
      .team-grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 760px){
      section{ padding:56px 0; }
      .widget-grid{ grid-template-columns:1fr; }
      .team-grid{ grid-template-columns:1fr; }
      .grid2{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>
  <!-- TOP -->
  <div class="top">
    <div class="wrap">
      <div class="top-inner">
        <a class="brand" href="#inicio" aria-label="Inicio">
          <span class="mark" aria-hidden="true"></span>
          <div>
            <strong>Tertulia Oro &amp; Cielo</strong>
            <span>Everton de Viña del Mar</span>
          </div>
        </a>

        <nav class="nav" aria-label="Navegación">
          <a href="#noticias">Noticias</a>
          <a href="#quienes">Quiénes somos</a>
          <a href="#equipo">Equipo</a>
          <a href="#contacto">Contacto</a>
        </nav>

        <a class="btn btn-yellow" href="https://www.instagram.com/tertulia_oroycielo/" target="_blank" rel="noopener">
          Instagram
        </a>
      </div>
    </div>
  </div>

  <!-- BANNER / HERO -->
  <section id="inicio" class="hero">
    <div class="wrap">
      <div class="hero-grid">
        <div>
          <div class="kicker"><span class="kdot"></span> Comunidad Oro &amp; Cielo conectada por Instagram</div>
          <h1>Noticias, análisis y conversación del Oro y Cielo.</h1>
          <p>
            Landing oficial de la tertulia: lo último desde Instagram y los partidos de Everton (últimos y próximos) cargados automáticamente.
          </p>

          <div class="hero-actions">
            <a class="btn btn-yellow" href="#noticias">Ver noticias</a>
            <a class="btn" href="#equipo">Ver equipo</a>
            <a class="btn" href="#contacto">Contacto</a>
          </div>

          <p class="tiny" id="dataStatus" style="margin-top:14px;">
            Cargando partidos…
          </p>
        </div>

        <!-- RESULTADOS / WIDGET -->
        <div class="card card-pad" aria-label="Partidos Everton">
          <div class="widget-head">
            <h3>Partidos Everton</h3>
            <button class="btn btn-yellow" id="refreshBtn" type="button" style="padding:9px 12px; font-size:12px;">
              Actualizar
            </button>
          </div>

          <div class="match-row" id="lastMatchCard">
            <div class="team">
              <div class="badge">E</div>
              <div>
                <b>Último partido</b>
                <span>—</span>
              </div>
            </div>
            <div class="score">—</div>
            <div class="team" style="justify-content:flex-end; text-align:right;">
              <div>
                <b>Rival</b>
                <span>—</span>
              </div>
              <div class="badge" style="background:rgba(255,210,0,.12);">R</div>
            </div>
          </div>

          <div class="match-row" id="nextMatchCard" style="margin-bottom:0;">
            <div class="team">
              <div class="badge">E</div>
              <div>
                <b>Próximo partido</b>
                <span>—</span>
              </div>
            </div>
            <div class="score">VS</div>
            <div class="team" style="justify-content:flex-end; text-align:right;">
              <div>
                <b>Rival</b>
                <span>—</span>
              </div>
              <div class="badge" style="background:rgba(255,210,0,.12);">R</div>
            </div>
          </div>

          <div class="widget-grid">
            <div class="list">
              <h4>Últimos 5</h4>
              <div id="last5"></div>
            </div>
            <div class="list">
              <h4>Próximos 5</h4>
              <div id="next5"></div>
            </div>
          </div>

          <div class="tiny" style="margin-top:10px;">
            Si la API no responde, se mostrará el último cache guardado (si existe).
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="hairline"></div>

  <!-- NOTICIAS -->
  <section id="noticias">
    <div class="wrap">
      <div class="block">
        <div class="block-head">
          <div>
            <h2>Noticias</h2>
            <p>Conectado con Instagram para mantener la web viva.</p>
          </div>
          <a class="btn btn-yellow" href="https://www.instagram.com/tertulia_oroycielo/" target="_blank" rel="noopener">
            Abrir perfil
          </a>
        </div>

        <div class="block-body">
          <div class="ig-box">
            <div class="ig-placeholder">
              <p>
                Pega aquí el <strong>iframe/script</strong> de tu widget de Instagram (LightWidget / Elfsight / etc.) y elimina este bloque.
              </p>
              <code>
                Ejemplo (pega tu iframe): &lt;iframe src="https://lightwidget.com/widgets/TU_WIDGET.html" style="width:100%;border:0;height:860px"&gt;&lt;/iframe&gt;
              </code>
            </div>

            <!--
              OPCIÓN: pega aquí tu iframe real.
              <iframe src="https://lightwidget.com/widgets/XXXX.html" scrolling="no" allowtransparency="true"
                style="width:100%;border:0;overflow:hidden;height:860px;"></iframe>
            -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="hairline"></div>

  <!-- QUIÉNES SOMOS -->
  <section id="quienes">
    <div class="wrap">
      <div class="block">
        <div class="block-head">
          <div>
            <h2>Quiénes somos</h2>
            <p>Hinchas conversando en serio, sin humo.</p>
          </div>
        </div>

        <div class="block-body">
          <p>
            <strong style="color:#fff;">Tertulia Oro &amp; Cielo</strong> es un proyecto independiente de comunidad.
            Hacemos noticias, análisis y conversación sobre Everton de Viña del Mar, con un enfoque directo, respetuoso
            y pensado para la hinchada.
          </p>
          <p class="tiny">Proyecto de comunidad, no oficial.</p>
        </div>
      </div>
    </div>
  </section>

  <div class="hairline"></div>

  <!-- EQUIPO -->
  <section id="equipo">
    <div class="wrap">
      <div class="block">
        <div class="block-head">
          <div>
            <h2>Equipo</h2>
            <p>Personas detrás de la tertulia (nombres y fotos de ejemplo).</p>
          </div>
        </div>

        <div class="block-body">
          <div class="team-grid">
            <!-- Fotos aleatorias (externas). Si quieres, las cambias por tus fotos reales. -->
            <div class="member">
              <div class="member-top">
                <div class="avatar"><img alt="Foto equipo" src="https://i.pravatar.cc/120?img=12"></div>
                <div>
                  <b>Matías Rojas</b>
                  <span>Conductor / Panel</span>
                </div>
              </div>
              <span>Noticias del club y conversación en vivo.</span>
            </div>

            <div class="member">
              <div class="member-top">
                <div class="avatar"><img alt="Foto equipo" src="https://i.pravatar.cc/120?img=32"></div>
                <div>
                  <b>Camila Fuentes</b>
                  <span>Producción / Contenido</span>
                </div>
              </div>
              <span>Guión, pauta y coordinación de publicaciones.</span>
            </div>

            <div class="member">
              <div class="member-top">
                <div class="avatar"><img alt="Foto equipo" src="https://i.pravatar.cc/120?img=54"></div>
                <div>
                  <b>Diego Salazar</b>
                  <span>Análisis / Datos</span>
                </div>
              </div>
              <span>Lecturas tácticas, estadísticas y contexto.</span>
            </div>

            <div class="member">
              <div class="member-top">
                <div class="avatar"><img alt="Foto equipo" src="https://i.pravatar.cc/120?img=7"></div>
                <div>
                  <b>Valentina Muñoz</b>
                  <span>RRSS / Comunidad</span>
                </div>
              </div>
              <span>Moderación y vínculo con la hinchada.</span>
            </div>
          </div>

          <p class="tiny" style="margin-top:12px;">
            Nota: estas fotos son “placeholder”. Reemplázalas por imágenes reales cuando las tengas.
          </p>
        </div>
      </div>
    </div>
  </section>

  <div class="hairline"></div>

  <!-- CONTACTO -->
  <section id="contacto">
    <div class="wrap">
      <div class="block">
        <div class="block-head">
          <div>
            <h2>Contacto</h2>
            <p>Colaboraciones, prensa, invitados y propuestas.</p>
          </div>
          <a class="btn btn-yellow" href="https://www.instagram.com/tertulia_oroycielo/" target="_blank" rel="noopener">
            DM por Instagram
          </a>
        </div>

        <div class="block-body">
          <p>
            Este formulario es demo. Si quieres envío real, puedes conectarlo a Formspree/Netlify Forms o un endpoint propio.
          </p>

          <form id="contactForm">
            <div class="grid2">
              <div>
                <label for="name">Nombre</label>
                <input id="name" name="name" type="text" placeholder="Tu nombre" required />
              </div>
              <div>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="tu@email.com" required />
              </div>
            </div>
            <div>
              <label for="message">Mensaje</label>
              <textarea id="message" name="message" placeholder="Cuéntanos tu propuesta..." required></textarea>
            </div>
            <button class="btn btn-yellow" type="submit">Enviar</button>
            <div id="formStatus" class="tiny" style="margin-top:8px;"></div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap">
      <div class="foot">
        <div>© <span id="year"></span> Tertulia Oro &amp; Cielo</div>
        <div>
          <a href="https://www.instagram.com/tertulia_oroycielo/" target="_blank" rel="noopener">Instagram</a>
          <span style="margin-left:10px;">Proyecto independiente, no oficial</span>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // =========================
    // PARTIDOS (API)
    // =========================
    const SPORTSDB_API_KEY = "1";      // demo key (para pruebas)
    const TEAM_ID = "137729";          // Everton de Viña del Mar
    const CACHE_KEY = "tertulia_matches_cache_v1";
    const CACHE_TTL_MS = 1000 * 60 * 30; // 30 min

    const $ = (id) => document.getElementById(id);

    function fmtDate(isoDate){
      if (!isoDate) return "Fecha por confirmar";
      const [y,m,d] = isoDate.split("-").map(Number);
      const dt = new Date(y, (m-1), d);
      return dt.toLocaleDateString("es-CL", { weekday:"short", day:"2-digit", month:"short", year:"numeric" });
    }

    function safeText(v, fallback="—"){ return (v && String(v).trim()) ? String(v).trim() : fallback; }

    async function fetchJSON(url, timeoutMs=9000){
      const controller = new AbortController();
      const timer = setTimeout(() => controller.abort(), timeoutMs);
      try{
        const r = await fetch(url, { signal: controller.signal, cache: "no-store" });
        if (!r.ok) throw new Error("HTTP " + r.status);
        return await r.json();
      } finally {
        clearTimeout(timer);
      }
    }

    function setStatus(msg){ $("dataStatus").textContent = msg; }

    function renderHeroCards(last, next){
      const lastCard = $("lastMatchCard");
      const nextCard = $("nextMatchCard");

      const lastOne = (last && last.length) ? last[0] : null;
      const nextOne = (next && next.length) ? next[0] : null;

      // LAST
      if (lastOne){
        const meta = fmtDate(lastOne.dateEvent);
        const score = (lastOne.intHomeScore != null && lastOne.intAwayScore != null)
          ? `${lastOne.intHomeScore} - ${lastOne.intAwayScore}` : "—";

        lastCard.querySelectorAll(".team span")[0].textContent = meta;
        lastCard.querySelector(".score").textContent = score;

        lastCard.querySelectorAll(".team b")[1].textContent = safeText(lastOne.strAwayTeam, "Rival");
        lastCard.querySelectorAll(".team span")[1].textContent = safeText(lastOne.strHomeTeam, "Everton");
      } else {
        lastCard.querySelectorAll(".team span")[0].textContent = "Sin datos por ahora";
        lastCard.querySelector(".score").textContent = "—";
      }

      // NEXT
      if (nextOne){
        const meta = fmtDate(nextOne.dateEvent);
        nextCard.querySelectorAll(".team span")[0].textContent = meta;
        nextCard.querySelector(".score").textContent = "VS";

        nextCard.querySelectorAll(".team b")[1].textContent = safeText(nextOne.strAwayTeam, "Rival");
        nextCard.querySelectorAll(".team span")[1].textContent = safeText(nextOne.strHomeTeam, "Everton");
      } else {
        nextCard.querySelectorAll(".team span")[0].textContent = "Por confirmar";
        nextCard.querySelector(".score").textContent = "VS";
      }
    }

    function row(container, ev, type){
      // type: "last" | "next"
      const div = document.createElement("div");
      div.className = "rowm";

      const meta = fmtDate(ev.dateEvent);
      const home = safeText(ev.strHomeTeam, "Local");
      const away = safeText(ev.strAwayTeam, "Visita");

      let right = "—";
      if (type === "last" && ev.intHomeScore != null && ev.intAwayScore != null){
        right = `${ev.intHomeScore}-${ev.intAwayScore}`;
      } else if (type === "next"){
        right = "Programado";
      }

      div.innerHTML = `
        <div class="left">
          <b>${home} vs ${away}</b>
          <span>${meta}</span>
        </div>
        <div class="pill">${right}</div>
      `;
      container.appendChild(div);
    }

    function renderLists(last, next){
      const last5 = $("last5");
      const next5 = $("next5");
      last5.innerHTML = "";
      next5.innerHTML = "";

      const lastSlice = (last || []).slice(0, 5);
      const nextSlice = (next || []).slice(0, 5);

      if (!lastSlice.length){
        last5.innerHTML = `<div class="tiny">No hay resultados disponibles.</div>`;
      } else {
        lastSlice.forEach(ev => row(last5, ev, "last"));
      }

      if (!nextSlice.length){
        next5.innerHTML = `<div class="tiny">No hay próximos partidos publicados.</div>`;
      } else {
        nextSlice.forEach(ev => row(next5, ev, "next"));
      }
    }

    function saveCache(data){
      try{
        localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data }));
      } catch(e){}
    }

    function loadCache(){
      try{
        const raw = localStorage.getItem(CACHE_KEY);
        if (!raw) return null;
        const parsed = JSON.parse(raw);
        if (!parsed || !parsed.data) return null;
        return parsed;
      } catch(e){
        return null;
      }
    }

    async function loadMatches(){
      setStatus("Cargando partidos…");

      const base = `https://www.thesportsdb.com/api/v1/json/${encodeURIComponent(SPORTSDB_API_KEY)}`;
      const lastUrl = `${base}/eventslast.php?id=${encodeURIComponent(TEAM_ID)}`;
      const nextUrl = `${base}/eventsnext.php?id=${encodeURIComponent(TEAM_ID)}`;

      // Si falla, mostramos cache
      try{
        const [last, next] = await Promise.all([fetchJSON(lastUrl), fetchJSON(nextUrl)]);
        const data = {
          last: (last && last.results) ? last.results : [],
          next: (next && next.events) ? next.events : []
        };

        saveCache(data);
        renderHeroCards(data.last, data.next);
        renderLists(data.last, data.next);

        setStatus("Partidos cargados (API).");
      } catch(err){
        console.warn("API error:", err);

        const cached = loadCache();
        if (cached && cached.data){
          renderHeroCards(cached.data.last, cached.data.next);
          renderLists(cached.data.last, cached.data.next);

          const age = Date.now() - cached.ts;
          const mins = Math.max(1, Math.round(age / 60000));
          setStatus(`No se pudo cargar la API. Mostrando último cache (hace ${mins} min).`);
        } else {
          setStatus("No se pudo cargar la API y no hay cache. Sube el HTML a un dominio (http/https) y reintenta.");
          $("last5").innerHTML = `<div class="tiny">Error cargando datos.</div>`;
          $("next5").innerHTML = `<div class="tiny">Error cargando datos.</div>`;
        }
      }
    }

    // =========================
    // CONTACT FORM (demo)
    // =========================
    const form = document.getElementById("contactForm");
    const formStatus = document.getElementById("formStatus");
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      formStatus.textContent = "Mensaje listo. Conecta este formulario a Formspree/Netlify Forms o tu backend para envío real.";
      form.reset();
    });

    // Init
    document.getElementById("year").textContent = new Date().getFullYear();
    document.getElementById("refreshBtn").addEventListener("click", loadMatches);
    loadMatches();
  </script>
</body>
</html>
